{"remainingRequest":"C:\\data\\projects\\vssh2\\frontend\\node_modules\\thread-loader\\dist\\cjs.js!C:\\data\\projects\\vssh2\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\data\\projects\\vssh2\\frontend\\node_modules\\vue-loader-v16\\dist\\templateLoader.js??ref--6!C:\\data\\projects\\vssh2\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\data\\projects\\vssh2\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\data\\projects\\vssh2\\frontend\\src\\components\\HelloWorld.vue?vue&type=template&id=60beee93","dependencies":[{"path":"C:\\data\\projects\\vssh2\\frontend\\src\\components\\HelloWorld.vue","mtime":1643094563037},{"path":"C:\\data\\projects\\vssh2\\frontend\\babel.config.js","mtime":1642990612224},{"path":"C:\\data\\projects\\vssh2\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1642990596778},{"path":"C:\\data\\projects\\vssh2\\frontend\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1642990596752},{"path":"C:\\data\\projects\\vssh2\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1642990597524},{"path":"C:\\data\\projects\\vssh2\\frontend\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":1642990596737},{"path":"C:\\data\\projects\\vssh2\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1642990596778},{"path":"C:\\data\\projects\\vssh2\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1642990595732}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgY3JlYXRlRWxlbWVudFZOb2RlIGFzIF9jcmVhdGVFbGVtZW50Vk5vZGUsIHJlc29sdmVDb21wb25lbnQgYXMgX3Jlc29sdmVDb21wb25lbnQsIGNyZWF0ZVZOb2RlIGFzIF9jcmVhdGVWTm9kZSwgd2l0aEN0eCBhcyBfd2l0aEN0eCwgY3JlYXRlVGV4dFZOb2RlIGFzIF9jcmVhdGVUZXh0Vk5vZGUsIG9wZW5CbG9jayBhcyBfb3BlbkJsb2NrLCBjcmVhdGVFbGVtZW50QmxvY2sgYXMgX2NyZWF0ZUVsZW1lbnRCbG9jaywgY3JlYXRlQ29tbWVudFZOb2RlIGFzIF9jcmVhdGVDb21tZW50Vk5vZGUgfSBmcm9tICJ2dWUiOwp2YXIgX2hvaXN0ZWRfMSA9IHsKICBrZXk6IDAKfTsKCnZhciBfaG9pc3RlZF8yID0gLyojX19QVVJFX18qL19jcmVhdGVFbGVtZW50Vk5vZGUoImgyIiwgbnVsbCwgIuivt+i+k+WFpei/nuaOpeS/oeaBryIsIC0xKTsKCnZhciBfaG9pc3RlZF8zID0gLyojX19QVVJFX18qL19jcmVhdGVUZXh0Vk5vZGUoIiDov57mjqUgIik7Cgp2YXIgX2hvaXN0ZWRfNCA9IC8qI19fUFVSRV9fKi9fY3JlYXRlVGV4dFZOb2RlKCIg5Y+W5raIICIpOwoKdmFyIF9ob2lzdGVkXzUgPSB7CiAga2V5OiAxLAogIGNsYXNzOiAiY29uc29sZSIsCiAgaWQ6ICJ0ZXJtaW5hbCIKfTsKZXhwb3J0IGZ1bmN0aW9uIHJlbmRlcihfY3R4LCBfY2FjaGUsICRwcm9wcywgJHNldHVwLCAkZGF0YSwgJG9wdGlvbnMpIHsKICB2YXIgX2NvbXBvbmVudF9lbF9pbnB1dCA9IF9yZXNvbHZlQ29tcG9uZW50KCJlbC1pbnB1dCIpOwoKICB2YXIgX2NvbXBvbmVudF9lbF9mb3JtX2l0ZW0gPSBfcmVzb2x2ZUNvbXBvbmVudCgiZWwtZm9ybS1pdGVtIik7CgogIHZhciBfY29tcG9uZW50X2VsX2J1dHRvbiA9IF9yZXNvbHZlQ29tcG9uZW50KCJlbC1idXR0b24iKTsKCiAgdmFyIF9jb21wb25lbnRfZWxfZm9ybSA9IF9yZXNvbHZlQ29tcG9uZW50KCJlbC1mb3JtIik7CgogIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVFbGVtZW50QmxvY2soImRpdiIsIG51bGwsIFskZGF0YS5pZCA9PSAnJyA/IChfb3BlbkJsb2NrKCksIF9jcmVhdGVFbGVtZW50QmxvY2soImRpdiIsIF9ob2lzdGVkXzEsIFtfaG9pc3RlZF8yLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9lbF9mb3JtLCB7CiAgICByZWY6ICJmb3JtIiwKICAgIHJ1bGVzOiAkZGF0YS5mb3JtX3JvbGUsCiAgICBzdHlsZTogewogICAgICAid2lkdGgiOiAiNzUlIgogICAgfSwKICAgIG1vZGVsOiAkZGF0YS5mb3JtLAogICAgImxhYmVsLXdpZHRoIjogIjEyMHB4IgogIH0sIHsKICAgIGRlZmF1bHQ6IF93aXRoQ3R4KGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9lbF9mb3JtX2l0ZW0sIHsKICAgICAgICBsYWJlbDogImlw5Zyw5Z2AIiwKICAgICAgICBwcm9wOiAiaXBfYWRkcmVzcyIKICAgICAgfSwgewogICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZWxfaW5wdXQsIHsKICAgICAgICAgICAgbW9kZWxWYWx1ZTogJGRhdGEuZm9ybS5pcF9hZGRyZXNzLAogICAgICAgICAgICAib25VcGRhdGU6bW9kZWxWYWx1ZSI6IF9jYWNoZVswXSB8fCAoX2NhY2hlWzBdID0gZnVuY3Rpb24gKCRldmVudCkgewogICAgICAgICAgICAgIHJldHVybiAkZGF0YS5mb3JtLmlwX2FkZHJlc3MgPSAkZXZlbnQ7CiAgICAgICAgICAgIH0pCiAgICAgICAgICB9LCBudWxsLCA4LCBbIm1vZGVsVmFsdWUiXSldOwogICAgICAgIH0pLAogICAgICAgIF86IDEKICAgICAgfSksIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X2VsX2Zvcm1faXRlbSwgewogICAgICAgIGxhYmVsOiAi6L+e5o6l56uv5Y+jIiwKICAgICAgICBwcm9wOiAicG9ydCIKICAgICAgfSwgewogICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZWxfaW5wdXQsIHsKICAgICAgICAgICAgbW9kZWxWYWx1ZTogJGRhdGEuZm9ybS5wb3J0LAogICAgICAgICAgICAib25VcGRhdGU6bW9kZWxWYWx1ZSI6IF9jYWNoZVsxXSB8fCAoX2NhY2hlWzFdID0gZnVuY3Rpb24gKCRldmVudCkgewogICAgICAgICAgICAgIHJldHVybiAkZGF0YS5mb3JtLnBvcnQgPSAkZXZlbnQ7CiAgICAgICAgICAgIH0pCiAgICAgICAgICB9LCBudWxsLCA4LCBbIm1vZGVsVmFsdWUiXSldOwogICAgICAgIH0pLAogICAgICAgIF86IDEKICAgICAgfSksIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X2VsX2Zvcm1faXRlbSwgewogICAgICAgIGxhYmVsOiAi55So5oi35ZCNIiwKICAgICAgICBwcm9wOiAidXNlcm5hbWUiCiAgICAgIH0sIHsKICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eChmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gW19jcmVhdGVWTm9kZShfY29tcG9uZW50X2VsX2lucHV0LCB7CiAgICAgICAgICAgIG1vZGVsVmFsdWU6ICRkYXRhLmZvcm0udXNlcm5hbWUsCiAgICAgICAgICAgICJvblVwZGF0ZTptb2RlbFZhbHVlIjogX2NhY2hlWzJdIHx8IChfY2FjaGVbMl0gPSBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuICRkYXRhLmZvcm0udXNlcm5hbWUgPSAkZXZlbnQ7CiAgICAgICAgICAgIH0pCiAgICAgICAgICB9LCBudWxsLCA4LCBbIm1vZGVsVmFsdWUiXSldOwogICAgICAgIH0pLAogICAgICAgIF86IDEKICAgICAgfSksIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X2VsX2Zvcm1faXRlbSwgewogICAgICAgIGxhYmVsOiAi5a+G56CBIiwKICAgICAgICBwcm9wOiAicGFzc3dvcmQiCiAgICAgIH0sIHsKICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eChmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gW19jcmVhdGVWTm9kZShfY29tcG9uZW50X2VsX2lucHV0LCB7CiAgICAgICAgICAgIHR5cGU6ICJwYXNzd29yZCIsCiAgICAgICAgICAgIG1vZGVsVmFsdWU6ICRkYXRhLmZvcm0ucGFzc3dvcmQsCiAgICAgICAgICAgICJvblVwZGF0ZTptb2RlbFZhbHVlIjogX2NhY2hlWzNdIHx8IChfY2FjaGVbM10gPSBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuICRkYXRhLmZvcm0ucGFzc3dvcmQgPSAkZXZlbnQ7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICAic2hvdy1wYXNzd29yZCI6ICIiCiAgICAgICAgICB9LCBudWxsLCA4LCBbIm1vZGVsVmFsdWUiXSldOwogICAgICAgIH0pLAogICAgICAgIF86IDEKICAgICAgfSksIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X2VsX2Zvcm1faXRlbSwgbnVsbCwgewogICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZWxfYnV0dG9uLCB7CiAgICAgICAgICAgIHR5cGU6ICJwcmltYXJ5IiwKICAgICAgICAgICAgb25DbGljazogX2NhY2hlWzRdIHx8IChfY2FjaGVbNF0gPSBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuICRvcHRpb25zLnBfaG9zdCgpOwogICAgICAgICAgICB9KQogICAgICAgICAgfSwgewogICAgICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIFtfaG9pc3RlZF8zXTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIF86IDEKICAgICAgICAgIH0pLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9lbF9idXR0b24sIHsKICAgICAgICAgICAgb25DbGljazogJG9wdGlvbnMuZl9jYW5jZWwKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBbX2hvaXN0ZWRfNF07CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBfOiAxCiAgICAgICAgICB9LCA4LCBbIm9uQ2xpY2siXSldOwogICAgICAgIH0pLAogICAgICAgIF86IDEKICAgICAgfSldOwogICAgfSksCiAgICBfOiAxCiAgfSwgOCwgWyJydWxlcyIsICJtb2RlbCJdKV0pKSA6IChfb3BlbkJsb2NrKCksIF9jcmVhdGVFbGVtZW50QmxvY2soImRpdiIsIF9ob2lzdGVkXzUpKV0pOwp9"},{"version":3,"sources":["C:\\data\\projects\\vssh2\\frontend\\src\\components\\HelloWorld.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <div v-if=\"id == ''\">\n      <h2>请输入连接信息</h2>\n      <el-form\n        ref=\"form\"\n        :rules=\"form_role\"\n        style=\"width: 75%\"\n        :model=\"form\"\n        label-width=\"120px\"\n      >\n        <el-form-item label=\"ip地址\" prop=\"ip_address\">\n          <el-input v-model=\"form.ip_address\" />\n        </el-form-item>\n        <el-form-item label=\"连接端口\" prop=\"port\">\n          <el-input v-model=\"form.port\" />\n        </el-form-item>\n        <el-form-item label=\"用户名\" prop=\"username\">\n          <el-input v-model=\"form.username\" />\n        </el-form-item>\n        <el-form-item label=\"密码\" prop=\"password\">\n          <el-input type=\"password\" v-model=\"form.password\" show-password />\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"p_host()\"> 连接 </el-button>\n          <el-button @click=\"f_cancel\"> 取消 </el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n    <div v-else class=\"console\" id=\"terminal\"></div>\n  </div>\n</template>\n<script>\nimport axios from \"axios\";\nimport { Terminal } from \"xterm\";\nimport * as attach from \"xterm/lib/addons/attach/attach\";\nimport * as fit from \"xterm/lib/addons/fit/fit\";\nexport default {\n  name: \"webssh\",\n  data() {\n    return {\n      term: null,\n      terminalSocket: null,\n      order: \"\",\n      id: \"\",\n      form_role: {\n        ip_address: [\n          { required: true, message: \"请输入IP地址\", trigger: \"blur\" },\n        ],\n        port: [{ required: true, message: \"请输入连接端口\", trigger: \"blur\" }],\n        username: [\n          { required: true, message: \"请输入用户名\", trigger: \"blur\" },\n        ],\n        password: [{ required: true, message: \"请输入密码\", trigger: \"blur\" }],\n      },\n      form: {\n        ip_address: \"\",\n        username: \"\",\n        port: \"\",\n        password: \"\",\n      },\n    };\n  },\n  methods: {\n    f_cancel() {\n      this.form = {\n        ip_address: \"\",\n        username: \"\",\n        port: \"\",\n        password: \"\",\n      };\n    },\n    p_host() {\n      console.log(this.form);\n      let host = window.location.host.split(\":\")[0]\n      axios\n        .post(`http://${host}:8080/api/chat/p-host`, this.form)\n        .then((res) => {\n          console.log(res);\n          if (res.data.code === 200) {\n            this.id = res.data.data.id;\n            const url =\n              window.location.protocol +\n              \"://\" +\n              window.location.host +\n              \"?id=\" +\n              this.id;\n            window.open(url);\n          }\n        });\n    },\n  },\n  mounted() {\n    let id = location.href.split(\"=\")[1];\n    if (id == undefined) {\n      console.log(\"?id=xxx 必须携带 id 参数\");\n    } else {\n      this.id = id;\n      //实例化一个websocket，用于和django江湖\n      let host = window.location.host.split(\":\")[0]\n      this.terminalSocket = new WebSocket(`ws://${host}:8000/web/${id}/`);\n      //获取到后端传回的信息\n      this.terminalSocket.onmessage = (res) => {\n        console.log(res);\n        const reader = new window.FileReader();\n        reader.onload = () => this.term.write(reader.result);\n        reader.readAsText(res.data, \"utf-8\");\n        //重置要发送的信息\n        this.order = \"\";\n      };\n      let terminalContainer = document.getElementById(\"terminal\");\n      const width = window.innerWidth;\n      const height = window.innerHeight;\n      console.log(\"width: \", width);\n      console.log(\"height: \", height);\n      //创建xterm实例\n      this.term = new Terminal({\n        rendererType: \"canvas\",\n        convertEol: true,\n        scrollback: 100,\n        fontSize: 14,\n        disableStdin: false,\n        cursorStyle: \"block\",\n        cursorBlink: true, // 显示光标\n        tabStopWidth: 4,\n        cols: parseInt(width / 8, 10),\n        rows: parseInt(height / 17, 10),\n      });\n\n      this.term.open(terminalContainer);\n\n      //在xterm上显示命令行提示\n      this.term.write(\"$ \");\n      this.term.on(\"resize\", (size) => {\n        this.terminalSocket.send(\"resize\", [size.cols, size.rows]);\n      });\n      //监听xterm的键盘事件\n      this.term.on(\"key\", (key, ev) => {\n        // key是输入的字符 ev是键盘按键事件\n        this.term.write(key);\n        if (ev.keyCode == 13) {\n          //使用webscoket将数据发送到django\n          const data = this.order;\n          this.terminalSocket.send(JSON.stringify({ data }));\n          // this.order=''\n          console.log(\"里面的order\", this.order);\n        } else if (ev.keyCode == 8) {\n          //删除按钮\n          //截取字符串[0,lenth-1]\n          this.order = this.order.substr(0, this.order.length - 1);\n\n          //清空当前一条的命令\n          this.term.write(\"\\x1b[2K\\r\");\n          //简化当前的新的命令显示上\n          this.term.write(\"$ \" + this.order);\n\n          console.log(\"截取的字符串\" + this.order);\n          typeof this.order;\n        } else {\n          // 将每次输入的字符拼凑起来\n          this.order += key;\n          console.log(\"外面的order\", this.order);\n        }\n      });\n    }\n  },\n};\n</script>"],"sourceRoot":""}]}