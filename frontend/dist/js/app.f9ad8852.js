(function(e){function t(t){for(var o,c,a=t[0],i=t[1],d=t[2],u=0,p=[];u<a.length;u++)c=a[u],Object.prototype.hasOwnProperty.call(n,c)&&n[c]&&p.push(n[c][0]),n[c]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o]);s&&s(t);while(p.length)p.shift()();return l.push.apply(l,d||[]),r()}function r(){for(var e,t=0;t<l.length;t++){for(var r=l[t],o=!0,a=1;a<r.length;a++){var i=r[a];0!==n[i]&&(o=!1)}o&&(l.splice(t--,1),e=c(c.s=r[0]))}return e}var o={},n={app:0},l=[];function c(t){if(o[t])return o[t].exports;var r=o[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.m=e,c.c=o,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)c.d(r,o,function(t){return e[t]}.bind(null,o));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],i=a.push.bind(a);a.push=t,a=a.slice();for(var d=0;d<a.length;d++)t(a[d]);var s=i;l.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var o=r("7a23");function n(e,t,r,n,l,c){var a=Object(o["resolveComponent"])("HelloWorld");return Object(o["openBlock"])(),Object(o["createBlock"])(a,{msg:"Welcome to Your Vue.js App"})}var l={key:0},c=Object(o["createElementVNode"])("h2",null,"请输入连接信息",-1),a=Object(o["createTextVNode"])(" 连接 "),i=Object(o["createTextVNode"])(" 取消 "),d={key:1,class:"console",id:"terminal"};function s(e,t,r,n,s,u){var p=Object(o["resolveComponent"])("el-input"),f=Object(o["resolveComponent"])("el-form-item"),m=Object(o["resolveComponent"])("el-button"),b=Object(o["resolveComponent"])("el-form");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[""==s.id?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",l,[c,Object(o["createVNode"])(b,{ref:"form",rules:s.form_role,style:{width:"75%"},model:s.form,"label-width":"120px"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(f,{label:"ip地址",prop:"ip_address"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{modelValue:s.form.ip_address,"onUpdate:modelValue":t[0]||(t[0]=function(e){return s.form.ip_address=e})},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(f,{label:"连接端口",prop:"port"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{modelValue:s.form.port,"onUpdate:modelValue":t[1]||(t[1]=function(e){return s.form.port=e})},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(f,{label:"用户名",prop:"username"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{modelValue:s.form.username,"onUpdate:modelValue":t[2]||(t[2]=function(e){return s.form.username=e})},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(f,{label:"密码",prop:"password"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{type:"password",modelValue:s.form.password,"onUpdate:modelValue":t[3]||(t[3]=function(e){return s.form.password=e}),"show-password":""},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(f,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(m,{type:"primary",onClick:t[4]||(t[4]=function(e){return u.p_host()})},{default:Object(o["withCtx"])((function(){return[a]})),_:1}),Object(o["createVNode"])(m,{onClick:u.f_cancel},{default:Object(o["withCtx"])((function(){return[i]})),_:1},8,["onClick"])]})),_:1})]})),_:1},8,["rules","model"])])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",d))])}var u=r("53ca"),p=(r("ac1f"),r("1276"),r("99af"),r("e9c4"),r("bc3a")),f=r.n(p),m=r("a647"),b=(r("f105"),r("c554"),{name:"webssh",data:function(){return{term:null,terminalSocket:null,order:"",id:"",form_role:{ip_address:[{required:!0,message:"请输入IP地址",trigger:"blur"}],port:[{required:!0,message:"请输入连接端口",trigger:"blur"}],username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},form:{ip_address:"",username:"",port:"",password:""}}},methods:{f_cancel:function(){this.form={ip_address:"",username:"",port:"",password:""}},p_host:function(){var e=this;console.log(this.form);var t=window.location.host.split(":")[0];f.a.post("http://".concat(t,":8080/api/chat/p-host"),this.form).then((function(t){if(console.log(t),200===t.data.code){e.id=t.data.data.id;var r=window.location.protocol+"://"+window.location.host+"?id="+e.id;window.open(r)}}))}},mounted:function(){var e=this,t=location.href.split("=")[1];if(void 0==t)console.log("?id=xxx 必须携带 id 参数");else{this.id=t;var r=window.location.host.split(":")[0];this.terminalSocket=new WebSocket("ws://".concat(r,":8000/web/").concat(t,"/")),this.terminalSocket.onmessage=function(t){console.log(t);var r=new window.FileReader;r.onload=function(){return e.term.write(r.result)},r.readAsText(t.data,"utf-8"),e.order=""};var o=document.getElementById("terminal"),n=window.innerWidth,l=window.innerHeight;console.log("width: ",n),console.log("height: ",l),this.term=new m["Terminal"]({rendererType:"canvas",convertEol:!0,scrollback:100,fontSize:14,disableStdin:!1,cursorStyle:"block",cursorBlink:!0,tabStopWidth:4,cols:parseInt(n/8,10),rows:parseInt(l/17,10)}),this.term.open(o),this.term.write("$ "),this.term.on("resize",(function(t){e.terminalSocket.send("resize",[t.cols,t.rows])})),this.term.on("key",(function(t,r){if(e.term.write(t),13==r.keyCode){var o=e.order;e.terminalSocket.send(JSON.stringify({data:o})),console.log("里面的order",e.order)}else 8==r.keyCode?(e.order=e.order.substr(0,e.order.length-1),e.term.write("[2K\r"),e.term.write("$ "+e.order),console.log("截取的字符串"+e.order),Object(u["a"])(e.order)):(e.order+=t,console.log("外面的order",e.order))}))}}}),h=r("6b0d"),w=r.n(h);const O=w()(b,[["render",s]]);var j=O,v={name:"App",components:{HelloWorld:j}};r("5e20");const g=w()(v,[["render",n]]);var y=g,k=(r("9368"),r("c3a1")),V=(r("d9b6"),Object(o["createApp"])(y));V.use(k["a"]),V.mount("#app")},"5e20":function(e,t,r){"use strict";r("f85d")},f85d:function(e,t,r){}});
//# sourceMappingURL=app.f9ad8852.js.map