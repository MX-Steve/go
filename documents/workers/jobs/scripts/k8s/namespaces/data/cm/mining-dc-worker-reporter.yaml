apiVersion: v1
data:
  worker-report.conf: |
    {
        "clickhouse_uri":"tcp://clickhouse-miner-stats.data:9000?username=bminer&password=2WHvybnS5vHsrMJ2&database=miner_stats",
        "mailgun_domain":"mg.alt-chain.io",
        "mailgun_api":"key-c13a2bdfe361d020d4a5ef25e9e620ff"
    }
  worker-report.tmpl: "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\"
    \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\n
    \ <head>\n    <meta name=\"viewport\" content=\"width=device-width\"/>\n    <meta
    http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />\n    <title>Reward
    Information</title>\n    <style type=\"text/css\">\n      table{\n        margin:
    10px 0 10px 0;\n        border-collapse: collapse;\n      }\n      table, td,
    th {\n        border: 1px solid gray;\n      }\n    </style>\n  </head>\n  <body>\n
    \   <p>\n      Hi, Please review worker information of {{.Date}}\n      <br />\n
    \     <br />\n      This reports:\n      <br />\n      a. Workers offline in whole
    day\n      <br />\n      b. Workers only some cards operating\n      <br />\n
    \     c. Workers with high temperature card\n      <br />\n      d. Workers with
    low hashrate card\n    </p>\n    <br />\n    <p>\n      Missing worker:\n    </p>\n
    \   <table class=\"table\" border=\"0\" style=\"width:100%\" align=\"center\">\n
    \     <tr>\n        <td>Data center</td>\n        <td>Worker</td>\n    \t</tr>\n
    \       <tbody>\n      \t{{ with .MissingWorkerList }}\n\t\t\t    {{ range . }}\n
    \     \t\t\t<tr>\n              <td>{{ .Site }}</td>\n              <td>{{ .Worker
    }}</td>\n      \t\t\t</tr>\n\t\t\t    {{ end }} \n      \t{{ end }}\n        </tbody>
    \ \n    </table>\n\n    <p>\n      Missing card:\n    </p>\n    <table class=\"table\"
    border=\"0\" style=\"width:100%\" align=\"center\">\n      <tr>\n        <td>Data
    center</td>\n        <td>Worker</td>\n        <td>Live cards</td>\n        <td>Total
    cards</td>\n    \t</tr>\n        <tbody>\n      \t{{ with .MissingCardList }}\n\t\t\t
    \   {{ range . }}\n      \t\t\t<tr>\n              <td>{{ .Site }}</td>\n              <td>{{
    .Worker }}</td>\n              <td>{{ .LiveCards }}</td>\n              <td>{{
    .TotalCards }}</td>\n      \t\t\t</tr>\n\t\t\t    {{ end }} \n      \t{{ end }}\n
    \       </tbody>  \n    </table>\n\n    <p>\n      High Temperature:\n    </p>\n
    \   <table class=\"table\" border=\"0\" style=\"width:100%\" align=\"center\">\n
    \     <tr>\n        <td>Data center</td>\n        <td>Worker</td>\n        <td>Pci
    id</td>\n        <td>Temperature</td>\n    \t</tr>\n        <tbody>\n      \t{{
    with .HighTempList }}\n\t\t\t    {{ range . }}\n      \t\t\t<tr>\n              <td>{{
    .Site }}</td>\n              <td>{{ .Worker }}</td>\n              <td>{{ .PciID
    }}</td>\n              <td>{{ .Temperature }}</td>\n      \t\t\t</tr>\n\t\t\t
    \   {{ end }} \n      \t{{ end }}\n        </tbody>  \n    </table>\n\n    <p>\n
    \     Low Speed:\n    </p>\n    <table class=\"table\" border=\"0\" style=\"width:100%\"
    align=\"center\">\n      <tr>\n        <td>Data center</td>\n        <td>Worker</td>\n
    \       <td>Pci id</td>\n        <td>Algorithm</td>\n        <td>Hashrate</td>\n
    \       <td>Expected Speed</td>\n    \t</tr>\n        <tbody>\n      \t{{ with
    .LowSpeedList }}\n\t\t\t    {{ range . }}\n      \t\t\t<tr>\n              <td>{{
    .Site }}</td>\n              <td>{{ .Worker }}</td>\n              <td>{{ .PciID
    }}</td>\n              <td>{{ .Algorithm }}</td>\n              <td>{{ .Hashrate
    }}</td>\n              <td>{{ .Speed }}</td>\n      \t\t\t</tr>\n\t\t\t    {{
    end }} \n      \t{{ end }}\n        </tbody>  \n    </table>\n    <p>\n      The
    email is sent automatically, please do not reply.\n      Any problem, please contact
    jixing@alt-chain.io\n    </p>\n  </body>\n</html>"
kind: ConfigMap
metadata:
  creationTimestamp: "2020-09-29T05:27:19Z"
  name: mining-dc-worker-reporter
  namespace: data
  resourceVersion: "108678835"
  selfLink: /api/v1/namespaces/data/configmaps/mining-dc-worker-reporter
  uid: 1ca8c225-437c-4f61-bde5-ecbf73957831
