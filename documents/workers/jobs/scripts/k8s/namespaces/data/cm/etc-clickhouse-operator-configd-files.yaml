apiVersion: v1
data:
  01-clickhouse-listen.xml: |
    <yandex>
        <!-- Listen wildcard address to allow accepting connections from other containers and host network. -->
        <listen_host>::</listen_host>
        <listen_host>0.0.0.0</listen_host>
        <listen_try>1</listen_try>
    </yandex>
  02-clickhouse-logger.xml: |
    <yandex>
        <logger>
            <!-- Possible levels: https://github.com/pocoproject/poco/blob/develop/Foundation/include/Poco/Logger.h#L105 -->
            <level>debug</level>
            <log>/var/log/clickhouse-server/clickhouse-server.log</log>
            <errorlog>/var/log/clickhouse-server/clickhouse-server.err.log</errorlog>
            <size>1000M</size>
            <count>10</count>
            <!-- Default behavior is autodetection (log to console if not daemon mode and is tty) -->
            <console>1</console>
        </logger>
    </yandex>
  03-clickhouse-querylog.xml: |
    <yandex>
    <query_log replace="1">
        <database>system</database>
        <table>query_log</table>
        <engine>Engine = MergeTree PARTITION BY event_date ORDER BY event_time TTL event_date + interval 30 day</engine>
        <flush_interval_milliseconds>7500</flush_interval_milliseconds>
        <collect_interval_milliseconds>1000</collect_interval_milliseconds>
    </query_log>
    <query_thread_log remove="1"/>
    </yandex>
  04-clickhouse-partlog.xml: |
    <yandex>
    <part_log replace="1">
        <database>system</database>
        <table>part_log</table>
        <engine>Engine = MergeTree PARTITION BY event_date ORDER BY event_time TTL event_date + interval 30 day</engine>
        <flush_interval_milliseconds>7500</flush_interval_milliseconds>
        <collect_interval_milliseconds>1000</collect_interval_milliseconds>
    </part_log>
    </yandex>
  05-clickhouse-metriclog.xml: |
    <yandex>
    <metric_log replace="1">
        <database>system</database>
        <table>metric_log</table>
        <engine>Engine = MergeTree PARTITION BY event_date ORDER BY event_time TTL event_date + interval 30 day SETTINGS min_bytes_for_wide_part = 10000000</engine>
        <flush_interval_milliseconds>7500</flush_interval_milliseconds>
        <collect_interval_milliseconds>1000</collect_interval_milliseconds>
    </metric_log>
    </yandex>
  06-clickhouse-asynchronousmetriclog.xml: |
    <yandex>
    <asynchronous_metric_log replace="1">
        <database>system</database>
        <table>asynchronous_metric_log</table>
        <engine>Engine = MergeTree PARTITION BY event_date ORDER BY event_time TTL event_date + interval 30 day SETTINGS min_bytes_for_wide_part = 10000000</engine>
        <flush_interval_milliseconds>7500</flush_interval_milliseconds>
        <collect_interval_milliseconds>1000</collect_interval_milliseconds>
    </asynchronous_metric_log>
    </yandex>
kind: ConfigMap
metadata:
  annotations:
    kubectl.kubernetes.io/last-applied-configuration: |
      {"apiVersion":"v1","data":{"01-clickhouse-listen.xml":"\u003cyandex\u003e\n    \u003c!-- Listen wildcard address to allow accepting connections from other containers and host network. --\u003e\n    \u003clisten_host\u003e::\u003c/listen_host\u003e\n    \u003clisten_host\u003e0.0.0.0\u003c/listen_host\u003e\n    \u003clisten_try\u003e1\u003c/listen_try\u003e\n\u003c/yandex\u003e\n","02-clickhouse-logger.xml":"\u003cyandex\u003e\n    \u003clogger\u003e\n        \u003c!-- Possible levels: https://github.com/pocoproject/poco/blob/develop/Foundation/include/Poco/Logger.h#L105 --\u003e\n        \u003clevel\u003edebug\u003c/level\u003e\n        \u003clog\u003e/var/log/clickhouse-server/clickhouse-server.log\u003c/log\u003e\n        \u003cerrorlog\u003e/var/log/clickhouse-server/clickhouse-server.err.log\u003c/errorlog\u003e\n        \u003csize\u003e1000M\u003c/size\u003e\n        \u003ccount\u003e10\u003c/count\u003e\n        \u003c!-- Default behavior is autodetection (log to console if not daemon mode and is tty) --\u003e\n        \u003cconsole\u003e1\u003c/console\u003e\n    \u003c/logger\u003e\n\u003c/yandex\u003e\n","03-clickhouse-querylog.xml":"\u003cyandex\u003e\n\u003cquery_log replace=\"1\"\u003e\n    \u003cdatabase\u003esystem\u003c/database\u003e\n    \u003ctable\u003equery_log\u003c/table\u003e\n    \u003cengine\u003eEngine = MergeTree PARTITION BY event_date ORDER BY event_time TTL event_date + interval 30 day\u003c/engine\u003e\n    \u003cflush_interval_milliseconds\u003e7500\u003c/flush_interval_milliseconds\u003e\n    \u003ccollect_interval_milliseconds\u003e1000\u003c/collect_interval_milliseconds\u003e\n\u003c/query_log\u003e\n\u003cquery_thread_log remove=\"1\"/\u003e\n\u003c/yandex\u003e\n","04-clickhouse-partlog.xml":"\u003cyandex\u003e\n\u003cpart_log replace=\"1\"\u003e\n    \u003cdatabase\u003esystem\u003c/database\u003e\n    \u003ctable\u003epart_log\u003c/table\u003e\n    \u003cengine\u003eEngine = MergeTree PARTITION BY event_date ORDER BY event_time TTL event_date + interval 30 day\u003c/engine\u003e\n    \u003cflush_interval_milliseconds\u003e7500\u003c/flush_interval_milliseconds\u003e\n    \u003ccollect_interval_milliseconds\u003e1000\u003c/collect_interval_milliseconds\u003e\n\u003c/part_log\u003e\n\u003c/yandex\u003e\n","05-clickhouse-metriclog.xml":"\u003cyandex\u003e\n\u003cmetric_log replace=\"1\"\u003e\n    \u003cdatabase\u003esystem\u003c/database\u003e\n    \u003ctable\u003emetric_log\u003c/table\u003e\n    \u003cengine\u003eEngine = MergeTree PARTITION BY event_date ORDER BY event_time TTL event_date + interval 30 day SETTINGS min_bytes_for_wide_part = 10000000\u003c/engine\u003e\n    \u003cflush_interval_milliseconds\u003e7500\u003c/flush_interval_milliseconds\u003e\n    \u003ccollect_interval_milliseconds\u003e1000\u003c/collect_interval_milliseconds\u003e\n\u003c/metric_log\u003e\n\u003c/yandex\u003e\n","06-clickhouse-asynchronousmetriclog.xml":"\u003cyandex\u003e\n\u003casynchronous_metric_log replace=\"1\"\u003e\n    \u003cdatabase\u003esystem\u003c/database\u003e\n    \u003ctable\u003easynchronous_metric_log\u003c/table\u003e\n    \u003cengine\u003eEngine = MergeTree PARTITION BY event_date ORDER BY event_time TTL event_date + interval 30 day SETTINGS min_bytes_for_wide_part = 10000000\u003c/engine\u003e\n    \u003cflush_interval_milliseconds\u003e7500\u003c/flush_interval_milliseconds\u003e\n    \u003ccollect_interval_milliseconds\u003e1000\u003c/collect_interval_milliseconds\u003e\n\u003c/asynchronous_metric_log\u003e\n\u003c/yandex\u003e\n"},"kind":"ConfigMap","metadata":{"annotations":{},"labels":{"app":"clickhouse-operator"},"name":"etc-clickhouse-operator-configd-files","namespace":"data"}}
  creationTimestamp: "2020-07-30T08:15:34Z"
  labels:
    app: clickhouse-operator
  name: etc-clickhouse-operator-configd-files
  namespace: data
  resourceVersion: "178697022"
  selfLink: /api/v1/namespaces/data/configmaps/etc-clickhouse-operator-configd-files
  uid: d28eff83-f49d-4bbb-8d16-d70fdac62a4f
