apiVersion: apps/v1
kind: Deployment
metadata:
  annotations:
    deployment.kubernetes.io/revision: "1"
    kubectl.kubernetes.io/last-applied-configuration: |
      {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{},"labels":{"app":"cfx-stratum"},"name":"cfx-stratum","namespace":"blockchain"},"spec":{"selector":{"matchLabels":{"app":"cfx-stratum"}},"strategy":{"rollingUpdate":{"maxSurge":1,"maxUnavailable":1},"type":"RollingUpdate"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"cfx-stratum"}},"spec":{"containers":[{"args":["-conf","/config/config.toml","-coin","cfx"],"command":["/app/stratum-frontend"],"env":[{"name":"IRISD_SERVICE_PORT","value":"2325"},{"name":"ALTCHAIN_DATACENTER","value":"yul01"}],"image":"313557088125.dkr.ecr.us-west-2.amazonaws.com/blockchain/stratum-frontend:conflux_stratum","imagePullPolicy":"Always","name":"cfx-stratum","ports":[{"containerPort":31537,"protocol":"TCP"},{"containerPort":32525,"protocol":"TCP"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/config","name":"config"},{"mountPath":"/cred","name":"cred","readOnly":true}]}],"dnsPolicy":"ClusterFirst","restartPolicy":"Always","schedulerName":"default-scheduler","securityContext":{},"terminationGracePeriodSeconds":30,"volumes":[{"configMap":{"defaultMode":420,"name":"cfx-stratum"},"name":"config"},{"name":"cred","secret":{"defaultMode":420,"secretName":"chord-pool"}}]}}}}
  creationTimestamp: "2021-05-13T01:17:33Z"
  generation: 1
  labels:
    app: cfx-stratum
  managedFields:
  - apiVersion: apps/v1
    fieldsType: FieldsV1
    fieldsV1:
      f:metadata:
        f:annotations:
          .: {}
          f:kubectl.kubernetes.io/last-applied-configuration: {}
        f:labels:
          .: {}
          f:app: {}
      f:spec:
        f:progressDeadlineSeconds: {}
        f:replicas: {}
        f:revisionHistoryLimit: {}
        f:selector:
          f:matchLabels:
            .: {}
            f:app: {}
        f:strategy:
          f:rollingUpdate:
            .: {}
            f:maxSurge: {}
            f:maxUnavailable: {}
          f:type: {}
        f:template:
          f:metadata:
            f:labels:
              .: {}
              f:app: {}
          f:spec:
            f:containers:
              k:{"name":"cfx-stratum"}:
                .: {}
                f:args: {}
                f:command: {}
                f:env:
                  .: {}
                  k:{"name":"ALTCHAIN_DATACENTER"}:
                    .: {}
                    f:name: {}
                    f:value: {}
                  k:{"name":"IRISD_SERVICE_PORT"}:
                    .: {}
                    f:name: {}
                    f:value: {}
                f:image: {}
                f:imagePullPolicy: {}
                f:name: {}
                f:ports:
                  .: {}
                  k:{"containerPort":31537,"protocol":"TCP"}:
                    .: {}
                    f:containerPort: {}
                    f:protocol: {}
                  k:{"containerPort":32525,"protocol":"TCP"}:
                    .: {}
                    f:containerPort: {}
                    f:protocol: {}
                f:resources: {}
                f:terminationMessagePath: {}
                f:terminationMessagePolicy: {}
                f:volumeMounts:
                  .: {}
                  k:{"mountPath":"/config"}:
                    .: {}
                    f:mountPath: {}
                    f:name: {}
                  k:{"mountPath":"/cred"}:
                    .: {}
                    f:mountPath: {}
                    f:name: {}
                    f:readOnly: {}
            f:dnsPolicy: {}
            f:restartPolicy: {}
            f:schedulerName: {}
            f:securityContext: {}
            f:terminationGracePeriodSeconds: {}
            f:volumes:
              .: {}
              k:{"name":"config"}:
                .: {}
                f:configMap:
                  .: {}
                  f:defaultMode: {}
                  f:name: {}
                f:name: {}
              k:{"name":"cred"}:
                .: {}
                f:name: {}
                f:secret:
                  .: {}
                  f:defaultMode: {}
                  f:secretName: {}
    manager: kubectl
    operation: Update
    time: "2021-05-13T01:17:33Z"
  - apiVersion: apps/v1
    fieldsType: FieldsV1
    fieldsV1:
      f:metadata:
        f:annotations:
          f:deployment.kubernetes.io/revision: {}
      f:status:
        f:availableReplicas: {}
        f:conditions:
          .: {}
          k:{"type":"Available"}:
            .: {}
            f:lastTransitionTime: {}
            f:lastUpdateTime: {}
            f:message: {}
            f:reason: {}
            f:status: {}
            f:type: {}
          k:{"type":"Progressing"}:
            .: {}
            f:lastTransitionTime: {}
            f:lastUpdateTime: {}
            f:message: {}
            f:reason: {}
            f:status: {}
            f:type: {}
        f:observedGeneration: {}
        f:readyReplicas: {}
        f:replicas: {}
        f:updatedReplicas: {}
    manager: kube-controller-manager
    operation: Update
    time: "2021-05-27T21:24:59Z"
  name: cfx-stratum
  namespace: blockchain
  resourceVersion: "204200140"
  selfLink: /apis/apps/v1/namespaces/blockchain/deployments/cfx-stratum
  uid: 48b50904-64ab-4340-87d5-d0b0740e1588
spec:
  progressDeadlineSeconds: 600
  replicas: 1
  revisionHistoryLimit: 10
  selector:
    matchLabels:
      app: cfx-stratum
  strategy:
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 1
    type: RollingUpdate
  template:
    metadata:
      creationTimestamp: null
      labels:
        app: cfx-stratum
    spec:
      containers:
      - args:
        - -conf
        - /config/config.toml
        - -coin
        - cfx
        command:
        - /app/stratum-frontend
        env:
        - name: IRISD_SERVICE_PORT
          value: "2325"
        - name: ALTCHAIN_DATACENTER
          value: yul01
        image: 313557088125.dkr.ecr.us-west-2.amazonaws.com/blockchain/stratum-frontend:conflux_stratum
        imagePullPolicy: Always
        name: cfx-stratum
        ports:
        - containerPort: 31537
          protocol: TCP
        - containerPort: 32525
          protocol: TCP
        resources: {}
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
        volumeMounts:
        - mountPath: /config
          name: config
        - mountPath: /cred
          name: cred
          readOnly: true
      dnsPolicy: ClusterFirst
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      terminationGracePeriodSeconds: 30
      volumes:
      - configMap:
          defaultMode: 420
          name: cfx-stratum
        name: config
      - name: cred
        secret:
          defaultMode: 420
          secretName: chord-pool
status:
  availableReplicas: 1
  conditions:
  - lastTransitionTime: "2021-05-13T01:17:33Z"
    lastUpdateTime: "2021-05-13T01:17:33Z"
    message: Deployment has minimum availability.
    reason: MinimumReplicasAvailable
    status: "True"
    type: Available
  - lastTransitionTime: "2021-05-13T01:17:33Z"
    lastUpdateTime: "2021-05-13T01:17:49Z"
    message: ReplicaSet "cfx-stratum-646644bc5d" has successfully progressed.
    reason: NewReplicaSetAvailable
    status: "True"
    type: Progressing
  observedGeneration: 1
  readyReplicas: 1
  replicas: 1
  updatedReplicas: 1
